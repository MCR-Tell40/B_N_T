ROOTFLAGS = $(shell root-config --cflags)
ROOTLIBS  = $(shell root-config --libs)

all: scramble_sim root_transition_analysis root_longest_chain root_balance_analysis

scramble_sim: scramble_sim.cpp scramble_sim.h
	g++ -o $@ scramble_sim.cpp

root_transition_analysis: root_transition_analysis.cpp root_transition_analysis.h
	g++ -o $@ root_transition_analysis.cpp $(ROOTFLAGS) $(ROOTLIBS)

root_longest_chain: root_longest_chain.cpp root_longest_chain.h
	g++ -o $@ root_longest_chain.cpp $(ROOTFLAGS) $(ROOTLIBS)

root_balance_analysis: root_balance_analysis.cpp root_balance_analysis.h
	g++ -o $@ root_balance_analysis.cpp $(ROOTFLAGS) $(ROOTLIBS)

run_short: scramble_sim root_transition_analysis root_longest_chain root_balance_analysis
	./scramble_sim desyncFilter.txt Karol_scramble_output_short.txt additive_scramble_output_short.txt
	./root_transition_analysis desyncFilter.txt Karol_scramble_output_short.txt additive_scramble_output_short.txt root_transition_analysis_short.root
	./root_longest_chain desyncFilter.txt Karol_scramble_output_short.txt additive_scramble_output_short.txt root_longest_chain_short.root
	./root_balance_analysis desyncFilter.txt Karol_scramble_output_short.txt additive_scramble_output_short.txt balance_analysis_short.root

run_full: scramble_sim root_transition_analysis root_longest_chain root_balance_analysis
	./scramble_sim desync9X.txt Karol_scramble_output_full.txt additive_scramble_output_full.txt
	./root_transition_analysis desync9X.txt Karol_scramble_output_full.txt additive_scramble_output_full.txt root_transition_analysis_full.root
	./root_longest_chain desync9X.txt Karol_scramble_output_full.txt additive_scramble_output_full.txt 0_root_longest_chain_full.root
	./root_balance_analysis desyncFilter.txt Karol_scramble_output_full.txt additive_scramble_output_full.txt balance_analysis_full.root

clean:
	rm -f scramble_sim
	rm -f root_transition_analysis
	rm -f root_longest_chain
